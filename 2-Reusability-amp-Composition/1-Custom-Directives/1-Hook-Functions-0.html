<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>钩子函数 - 自定义指令 - Vue.js</title>
    <script src="https://unpkg.com/vue/dist/vue.js"></script>
  </head>
  <body>
    <div id="directive-example">
      <input type="text" v-input>
    </div>
    <script>
      // 指令定义函数提供了几个钩子函数（可选）：
      // - `bind`：只调用一次，指令第一次绑定到元素时调用，用这个钩子函数可以定义一个在绑定时执行一次的初始化动作。
      // - `inserted`：被绑定元素插入父节点时调用（父节点存在即可调用，不必存在于 document 中）。
      // - `update`：所在组件的 VNode 更新时调用，但是可能发生在其孩子的 VNode 更新之前。指令的值可能发生了改变也可能没有。但是你可以通过比较更新前后的值来忽略不必要的模板更新（详细的钩子函数参数见下）。
      // - `componentUpdated`：所在组件的 VNode 及其孩子的 VNode 全部更新时调用。
      // - `unbind`：只调用一次，指令与元素解绑时调用。

      // 注册一个全局自定义指令 v-input
      Vue.directive('input', {
        bind: function (el) {
          console.log('bind')
        },
        inserted: function (el) {
          console.log('inserted')
        },
        update: function (el) {
          console.log('update')
        },
        componentUpdated: function (el) {
          console.log('componentUpdated')
        },
        unbind: function (el) {
          console.log('unbind')
        }
      })
      new Vue({
        el: '#directive-example'
      })
    </script>
  </body>
</html>